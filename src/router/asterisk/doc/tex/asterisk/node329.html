<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2002-2-1 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Office hours</TITLE>
<META NAME="description" CONTENT="Office hours">
<META NAME="keywords" CONTENT="asterisk">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2002-2-1">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="asterisk.css">

<LINK REL="next" HREF="node330.html">
<LINK REL="previous" HREF="node328.html">
<LINK REL="up" HREF="node328.html">
<LINK REL="next" HREF="node330.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html5185"
  HREF="node330.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="/usr/share/latex2html/icons/next.png"></A> 
<A NAME="tex2html5181"
  HREF="node328.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="/usr/share/latex2html/icons/up.png"></A> 
<A NAME="tex2html5175"
  HREF="node328.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="/usr/share/latex2html/icons/prev.png"></A> 
<A NAME="tex2html5183"
  HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="/usr/share/latex2html/icons/contents.png"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html5186"
  HREF="node330.html">Meeting reminders</A>
<B> Up:</B> <A NAME="tex2html5182"
  HREF="node328.html">Dialplan Examples</A>
<B> Previous:</B> <A NAME="tex2html5176"
  HREF="node328.html">Dialplan Examples</A>
 &nbsp; <B>  <A NAME="tex2html5184"
  HREF="node1.html">Contents</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION001741000000000000000">
Office hours</A>
</H2>
A common business PBX scenario is would be executing dialplan logic based on
when the business is open and the phones staffed. If the business is closed for
holidays, it is sometimes desirable to play a message to the caller stating why
the business is closed.

<P>
The standard way to do this in asterisk has been doing a series of GotoIfTime
statements or time-based include statements. Either way can be tedious and
requires someone with access to edit asterisk config files.

<P>
With calendaring, the adminstrator only needs to set up a calendar that contains
the various holidays or even recurring events specifying the office hours. A
custom greeting filename could even be contained in the description field for
playback. For example:
</B></SMALL>
<UL>
<LI><PRE>
[incoming]
exten =&gt; 5555551212,1,Answer
exten =&gt; 5555551212,n,GotoIf(${CALENDAR_BUSY(officehours)}?closed:attendant,s,1)
exten =&gt; 5555551212,n(closed),Set(id=${CALENDAR_QUERY(office,${EPOCH},${EPOCH})})
exten =&gt; 5555551212,n,Set(soundfile=${CALENDAR_QUERY_RESULT(${id},description)})
exten =&gt; 5555551212,n,Playback($[${ISNULL(soundfile)} ? generic-closed :: ${soundfile}])
exten =&gt; 5555551212,n,Hangup
</PRE><SMALL CLASS="SCRIPTSIZE"><B>
</LI>
</UL>
<P>
<BR><HR>
<ADDRESS>
lmadsen
2010-10-21
</ADDRESS>
</BODY>
</HTML>

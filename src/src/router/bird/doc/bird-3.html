<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 1.0.9">
 <TITLE>BIRD User's Guide: Configuration</TITLE>
 <LINK HREF="bird-4.html" REL=next>
 <LINK HREF="bird-2.html" REL=previous>
 <LINK HREF="bird.html#toc3" REL=contents>
</HEAD>
<BODY>
<A HREF="bird-4.html">Next</A>
<A HREF="bird-2.html">Previous</A>
<A HREF="bird.html#toc3">Contents</A>
<HR>
<H2><A NAME="s3">3.</A> <A HREF="bird.html#toc3">Configuration</A></H2>

<H2><A NAME="ss3.1">3.1</A> <A HREF="bird.html#toc3.1">Introduction</A>
</H2>

<P>BIRD is configured using a text configuration file. Upon startup, BIRD reads <I>prefix</I>/etc/bird.conf (unless the
<CODE>-c</CODE> command line option is given). Configuration may be changed at user's request: if you modify
the config file and then signal BIRD with <CODE>SIGHUP</CODE>, it will adjust to the new
config. Then there's the client
which allows you to talk with BIRD in an extensive way.
<P>
<P>In the config, everything on a line after <CODE>#</CODE> or inside <CODE>/*
*/</CODE> is a comment, whitespace characters are treated as a single space. If there's a variable number of options, they are grouped using
the <CODE>{ }</CODE> brackets. Each option is terminated by a <CODE>;</CODE>. Configuration
is case sensitive.
<P>
<P>Here is an example of a simple config file. It enables
synchronization of routing tables with OS kernel, scans for 
new network interfaces every 10 seconds and runs RIP on all network interfaces found.
<P>
<P>
<HR>
<PRE>
protocol kernel {
        persist;                # Don't remove routes on BIRD shutdown
        scan time 20;           # Scan kernel routing table every 20 seconds
        export all;             # Default is export none
}

protocol device {
        scan time 10;           # Scan interfaces every 10 seconds
}

protocol rip {
        export all;
        import all;
}
</PRE>
<HR>
<P>
<P>
<H2><A NAME="ss3.2">3.2</A> <A HREF="bird.html#toc3.2">Global options</A>
</H2>

<P>
<DL>
<DT><CODE>log "<I>filename</I>"|syslog|stderr all|{ <I>list of classes</I> }</CODE><DD><P>Set logging of messages having the given class (either <CODE>all</CODE> or <CODE>{
error, trace }</CODE> etc.) into selected destination. Classes are:
<CODE>info</CODE>, <CODE>warning</CODE>, <CODE>error</CODE> and <CODE>fatal</CODE> for messages about local problems,
<CODE>debug</CODE> for debugging messages, 
<CODE>trace</CODE> when you want to know what happens in the network, 
<CODE>remote</CODE> for messages about misbehavior of remote machines, 
<CODE>auth</CODE> about authentication failures,
<CODE>bug</CODE> for internal BIRD bugs. You may specify more than one <CODE>log</CODE> line to establish logging to multiple
destinations. Default: log everything to the system log.
<P>
<DT><CODE>debug protocols all|off|{ states, routes, filters, interfaces, events, packets }</CODE><DD><P>Set global defaults of protocol debugging options. See <CODE>debug</CODE> in the following section. Default: off.
<P>
<DT><CODE>debug commands <I>number</I></CODE><DD><P>Control logging of client connections (0 for no logging, 1 for
logging of connects and disconnects, 2 and higher for logging of
all client commands). Default: 0.
<P>
<DT><CODE>filter <I>name local variables</I>{ <I>commands</I> }</CODE><DD><P>Define a filter. You can learn more about filters
in the following chapter. 
<P>
<DT><CODE>function <I>name</I> (<I>parameters</I>) <I>local variables</I> { <I>commands</I> }</CODE><DD><P>Define a function. You can learn more
about functions in the following chapter.
<P>
<DT><CODE>protocol rip|ospf|bgp|... <I>[name]</I> { <I>protocol options</I> }</CODE><DD><P>Define a protocol
instance called <CODE><I>name</I></CODE> (or with a name like "rip5" generated automatically if you don't specify any <CODE><I>name</I></CODE>). You can learn more
about configuring protocols in their own chapters. You can run more than one instance of
most protocols (like RIP or BGP). By default, no instances are configured.
<P>
<DT><CODE>define <I>constant</I> = (<I>expression</I>)|<I>number</I>|<I>IP address</I></CODE><DD><P>Define a constant. You can use it later in every place
you could use a simple integer or an IP address.
<P>
<DT><CODE>router id <I>IPv4 address</I></CODE><DD><P>Set BIRD's router ID. It's a world-wide unique identification of your router, usually one of router's IPv4 addresses. Default: in IPv4 version, the lowest IP address of a non-loopback interface. In IPv6 version, this option is mandatory. 
<P>
<DT><CODE>table <I>name</I></CODE><DD><P>Create a new routing table. The default
routing table is created implicitly, other routing tables have
to be added by this command.
<P>
<DT><CODE>eval <I>expr</I></CODE><DD><P>Evaluates given filter expression. It
is used by us for testing of filters.
</DL>
<P>
<H2><A NAME="ss3.3">3.3</A> <A HREF="bird.html#toc3.3">Protocol options</A>
</H2>

<P>For each protocol instance, you can configure a bunch of options.
Some of them (those described in this section) are generic, some are
specific to the protocol (see sections talking about the protocols).
<P>
<P>Several options use a <CODE><I>switch</I></CODE> argument. It can be either
<CODE>on</CODE>, <CODE>yes</CODE> or a numeric expression with a non-zero value for the
option to be enabled or <CODE>off</CODE>, <CODE>no</CODE> or a numeric expression evaluating
to zero to disable it. An empty <CODE><I>switch</I></CODE> is equivalent to <CODE>on</CODE>
("silence means agreement").
<P>
<DL>
<DT><CODE>preference <I>expr</I></CODE><DD><P>Sets the preference of routes generated by this protocol. Default: protocol dependent.
<P>
<DT><CODE>disabled <I>switch</I></CODE><DD><P>Disables the protocol. You can change the disable/enable status from the command
line interface without needing to touch the configuration. Disabled protocols are not activated. Default: protocol is enabled.
<P>
<DT><CODE>debug all|off|{ states, routes, filters, interfaces, events, packets }</CODE><DD><P>Set protocol debugging options. If asked, each protocol is capable of
writing trace messages about its work to the log (with category
<CODE>trace</CODE>). You can either request printing of <CODE>all</CODE> trace messages
or only of the types selected: <CODE>states</CODE> for protocol state changes
(protocol going up, down, starting, stopping etc.),
<CODE>routes</CODE> for routes exchanged with the routing table,
<CODE>filters</CODE> for details on route filtering,
<CODE>interfaces</CODE> for interface change events sent to the protocol,
<CODE>events</CODE> for events internal to the protocol and
<CODE>packets</CODE> for packets sent and received by the protocol. Default: off.
<P>
<DT><CODE>import all | none | filter <I>name</I> | filter { <I>filter commands</I> } | where <I>filter expression</I></CODE><DD><P>Specify a filter to be used for filtering routes coming from the protocol to the routing table. <CODE>all</CODE> is shorthand for <CODE>where true</CODE> and <CODE>none</CODE> is shorthand for <CODE>where false</CODE>. Default: <CODE>all</CODE>.
<P>
<DT><CODE>export <I>filter</I></CODE><DD><P>This is similar to the <CODE>import</CODE> keyword, except that it
works in the direction from the routing table to the protocol. Default: <CODE>none</CODE>.
<P>
<DT><CODE>table <I>name</I></CODE><DD><P>Connect this protocol to a non-default routing table.
</DL>
<P>
<P>There are several options that give sense only with certain protocols:
<P>
<DL>
<DT><CODE>passwords { password "<I>password</I>" from <I>time</I> to <I>time</I> passive <I>time</I> id
<I>num</I> [...] }</CODE><DD><P>Specifies passwords to be used with this protocol. <CODE>Passive <I>time</I></CODE> is
time from which the password is not used for sending, but it is recognized on reception. <CODE>id</CODE> is password ID as needed by
certain protocols. Format of <CODE><I>time</I></CODE> is <CODE>dd-mm-yyyy HH:MM:SS</CODE>.
<P>
<DT><CODE>interface "<I>mask</I>"|<I>prefix</I> [ { <I>option</I> ; [...] } ]</CODE><DD><P>Specifies which
interfaces is this protocol active on and allows you to set options on a
per-interface basis. Mask is specified as in shell-like patterns, thus <CODE>interface
"*" { mode broadcast; };</CODE> will start the protocol on all interfaces with <CODE>mode
broadcast;</CODE> option. If the first character of mask is <CODE>-</CODE>, such interfaces are
excluded. Masks are parsed left-to-right, thus <CODE>interface "-eth*", "*";</CODE> means all but
the ethernets. Default: none.
<P>
</DL>
<P>
<HR>
<A HREF="bird-4.html">Next</A>
<A HREF="bird-2.html">Previous</A>
<A HREF="bird.html#toc3">Contents</A>
</BODY>
</HTML>
